import os
import sys

sys_paths = os.environ.get("PUZZLE_SYS_PATH", "")

if sys_paths != "":
    for path in sys_paths.split(";"):
        if path not in sys.path:
            sys.path.insert(0, path)
            print("PATHAPPEND: {}".format(path))
    # sys.path.insert(0, sys_paths)

app = os.environ.get("PUZZLE_APP", "")

from puzzle2.PuzzleBatch import PuzzleBatch

if "mayapy" in app:
    import maya.standalone 
    maya.standalone.initialize(name="python")
    __STANDALONE__ = True
else:
    __STANDALONE__ = False

batch = PuzzleBatch()
batch.start()

if __STANDALONE__:
    try:
        maya.standalone.uninitialize()
    except:
        pass
    os._exit(0)